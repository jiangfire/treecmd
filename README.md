# Modern Tree Command

ä¸€ä¸ªç”¨Rustå¼€å‘çš„ç°ä»£treeå‘½ä»¤ï¼Œå…¼å®¹Linux treeå‘½ä»¤çš„æ‰€æœ‰å‚æ•°ï¼Œå¯åœ¨Windowsã€Linuxå’ŒmacOSä¸Šè¿è¡Œã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **å®Œå…¨å…¼å®¹Linux treeå‘½ä»¤**ï¼šæ”¯æŒæ‰€æœ‰Linux treeå‘½ä»¤çš„å‚æ•°
- **è·¨å¹³å°æ”¯æŒ**ï¼šå¯åœ¨Windowsã€Linuxå’ŒmacOSä¸Šè¿è¡Œ
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–çš„ç›®å½•éå†ç®—æ³•ï¼Œé»˜è®¤é™åˆ¶æ·±åº¦ä¸º3å±‚
- **è½»é‡çº§**ï¼šä¼˜åŒ–çš„äºŒè¿›åˆ¶å¤§å°ï¼Œä»…çº¦1.3MB
- **å½©è‰²è¾“å‡º**ï¼šæ”¯æŒç»ˆç«¯å½©è‰²æ˜¾ç¤ºï¼Œå¯é€šè¿‡å‚æ•°æ§åˆ¶
- **JSONè¾“å‡º**ï¼šæ”¯æŒä»¥JSONæ ¼å¼è¾“å‡ºç›®å½•ç»“æ„ï¼ˆä¿®å¤äº†é‡å¤æ ¹èŠ‚ç‚¹é—®é¢˜ï¼‰

### ğŸ’¡ å¢å¼ºç‰¹æ€§
- **æ·±åº¦é™åˆ¶**ï¼šé»˜è®¤é™åˆ¶éå†æ·±åº¦ä¸º3å±‚ï¼Œé¿å…åœ¨å¤§å‹ç›®å½•ä¸­æ€§èƒ½é—®é¢˜
- **å¹¶è¡Œå¤„ç†**ï¼šæ”¯æŒå¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ï¼Œä½¿ç”¨RayonåŠ é€Ÿæ’åºï¼ˆ`--threads`å‚æ•°ï¼‰
- **æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤**ï¼šæ”¯æŒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤æ–‡ä»¶å’Œç›®å½•
- **æ–‡ä»¶ç±»å‹æŒ‡ç¤º**ï¼šåœ¨ç›®å½•åæ·»åŠ "/"ï¼Œç¬¦å·é“¾æ¥åæ·»åŠ "@"
- **æƒé™æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ–‡ä»¶æƒé™ä¿¡æ¯
- **å¤§å°æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œæ”¯æŒäººæ€§åŒ–æ ¼å¼
- **æ—¶é—´æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ–‡ä»¶ä¿®æ”¹æ—¶é—´

### âœ¨ æœ€æ–°æ›´æ–°
- **è¿›åº¦æ˜¾ç¤ºåŠŸèƒ½**ï¼šæ–°å¢`--progress`å‚æ•°ï¼Œå®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œæ–‡ä»¶æ•°é‡
- **æ— ç¼©è¿›çº¿æ¨¡å¼**ï¼šæ–°å¢`-i/--noreport`å‚æ•°ï¼Œä»…æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ï¼Œä¸æ‰“å°ç¼©è¿›çº¿
- **å¯æ‰§è¡Œæ–‡ä»¶æ ‡è®°**ï¼š`-F`å‚æ•°ç°åœ¨ä¼šä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ "*"æ ‡è®°
- **å¹¶è¡Œå¤„ç†æ”¯æŒ**ï¼šé›†æˆRayonåº“ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶è¡Œæ’åº
- **å®Œæ•´æµ‹è¯•å¥—ä»¶**ï¼šåŒ…å«9ä¸ªé›†æˆæµ‹è¯•ï¼Œè¦†ç›–ä¸»è¦åŠŸèƒ½
- **JSONç»“æ„ä¼˜åŒ–**ï¼šä¿®å¤äº†JSONè¾“å‡ºä¸­çš„é‡å¤æ ¹èŠ‚ç‚¹é—®é¢˜
- **åº“æ¶æ„**ï¼šæä¾›lib.rsä½œä¸ºåº“å…¥å£ï¼Œæ”¯æŒä½œä¸ºä¾èµ–ä½¿ç”¨

## å®‰è£…æ–¹æ³•

### ğŸš€ æ¨èï¼šä» GitHub Releases ä¸‹è½½ï¼ˆæœ€å¿«ï¼‰

ä» [GitHub Releases](https://github.com/yourusername/treecmd/releases) é¡µé¢ä¸‹è½½é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š

```bash
# Linux x86_64
wget https://github.com/yourusername/treecmd/releases/latest/download/tree-x86_64-unknown-linux-gnu
chmod +x tree-x86_64-unknown-linux-gnu
sudo mv tree-x86_64-unknown-linux-gnu /usr/local/bin/tree

# macOS x86_64
wget https://github.com/yourusername/treecmd/releases/latest/download/tree-x86_64-apple-darwin
chmod +x tree-x86_64-apple-darwin
sudo mv tree-x86_64-apple-darwin /usr/local/bin/tree

# Windows (PowerShell)
Invoke-WebRequest -Uri "https://github.com/yourusername/treecmd/releases/latest/download/tree-x86_64-pc-windows-msvc.exe" -OutFile "tree.exe"
# å°† tree.exe æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡
```

### ğŸ“¦ ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆå³å°†æ”¯æŒï¼‰

```bash
# macOS (Homebrew)
brew install treecmd

# Linux (curl ä¸€é”®å®‰è£…)
curl -fsSL https://raw.githubusercontent.com/yourusername/treecmd/main/install.sh | bash

# Windows (winget)
winget install treecmd
```

### ğŸ”¨ ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/treecmd.git
cd treecmd

# å¼€å‘æ„å»º
cargo build

# å‘å¸ƒæ„å»ºï¼ˆæ¨èï¼Œä¼˜åŒ–å¤§å°å’Œæ€§èƒ½ï¼‰
cargo build --release

# å¯æ‰§è¡Œæ–‡ä»¶ä½äº target/release/tree.exe (Windows) æˆ– target/release/tree (Linux/macOS)

# æˆ–ä½¿ç”¨æ„å»ºè„šæœ¬æ„å»ºæ‰€æœ‰å¹³å°
chmod +x scripts/build-release.sh
./scripts/build-release.sh all
```

### ğŸ§ ä½¿ç”¨ Cargo å®‰è£…

```bash
# ä» crates.io å®‰è£…ï¼ˆå‘å¸ƒåï¼‰
cargo install treecmd

# ä» Git å®‰è£…ï¼ˆæœ€æ–°å¼€å‘ç‰ˆï¼‰
cargo install --git https://github.com/yourusername/treecmd.git
```

## ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ç”¨æ³•

```bash
tree [options] [path]
```

### ä¸»è¦å‚æ•°

| å‚æ•° | é•¿é€‰é¡¹ | æè¿° |
|------|--------|------|
| `-a` | `--all` | æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ |
| `-A` | `--ascii` | ä½¿ç”¨ASCIIçº¿æ¡å­—ç¬¦ |
| `-C` | `--color` | å½©è‰²è¾“å‡ºæ–‡ä»¶å |
| `-d` | `--dirs-only` | ä»…æ˜¾ç¤ºç›®å½•ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶ |
| `-D` | `--mtime` | æ˜¾ç¤ºæ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ |
| `-F` | `--filelimit` | åœ¨ç›®å½•åæ·»åŠ "/"ï¼Œç¬¦å·é“¾æ¥åæ·»åŠ "@"ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åæ·»åŠ "*" |
| `-f` | `--full-path` | æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å®Œæ•´è·¯å¾„å‰ç¼€ |
| `-g` | `--gid` | æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„åç§°æˆ–GID |
| `-i` | `--noreport` | ä¸æ˜¾ç¤ºç¼©è¿›çº¿ï¼Œä»…æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ |
| `-I` | `--exclude` | æ’é™¤åŒ¹é…æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶å’Œç›®å½• |
| `-l` | `--follow-links` | è·Ÿéšç¬¦å·é“¾æ¥ï¼Œè§†ä¸ºç›®å½• |
| `-L` | `--level` | é™åˆ¶æ˜¾ç¤ºçš„ç›®å½•æ·±åº¦ï¼ˆé»˜è®¤ï¼š3ï¼‰ |
| `-n` | `--no-color` | ä¸æ˜¾ç¤ºå½©è‰²è¾“å‡º |
| `-P` | `--include` | ä»…æ˜¾ç¤ºåŒ¹é…æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶å’Œç›®å½• |
| `-p` | `--perms` | æ˜¾ç¤ºæ–‡ä»¶æƒé™ |
| `-q` | `--quiet` | ç”¨é—®å·ä»£æ›¿ä¸å¯æ‰“å°å­—ç¬¦ |
| `-s` | `--size` | æ˜¾ç¤ºæ–‡ä»¶å¤§å° |
| `-t` | `--sort` | æŒ‰æŒ‡å®šé¡ºåºæ’åºï¼ˆé»˜è®¤ï¼šnameï¼Œå¯é€‰ï¼štimeï¼‰ |
| `-u` | `--uid` | æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…åç§°æˆ–UID |
| `-x` | `--samefilesystem` | ä»…éå†å½“å‰æ–‡ä»¶ç³»ç»Ÿ |
| `--json` | | ä»¥JSONæ ¼å¼è¾“å‡ºç»“æœ |
| `--progress` | | æ˜¾ç¤ºå¤„ç†è¿›åº¦ |
| `--threads` | | æŒ‡å®šå¹¶è¡Œå¤„ç†çš„çº¿ç¨‹æ•° |

## ä½¿ç”¨ç¤ºä¾‹

### é»˜è®¤è¾“å‡º

```bash
tree
```

è¾“å‡ºï¼š
```
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ config.rs
â”‚   â”œâ”€â”€ formatter.rs
â”‚   â”œâ”€â”€ main.rs
â”‚   â””â”€â”€ walker.rs
â””â”€â”€ target
    â”œâ”€â”€ debug
    â””â”€â”€ release

5 directorys,  6 files
```

### æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰

```bash
tree -a
```

### ä»…æ˜¾ç¤ºç›®å½•

```bash
tree -d
```

### é™åˆ¶æ·±åº¦ä¸º2

```bash
tree -L 2
```

### æ˜¾ç¤ºæ–‡ä»¶å¤§å°å’Œæƒé™

```bash
tree -p -s
```

### æŒ‰ä¿®æ”¹æ—¶é—´æ’åº

```bash
tree -t
```

### æ’é™¤ç‰¹å®šæ–‡ä»¶

```bash
tree -I "*.log"
```

### ä»…æ˜¾ç¤ºç‰¹å®šç±»å‹çš„æ–‡ä»¶

```bash
tree -P "*.rs"
```

## ä¸Linux treeå‘½ä»¤çš„å…¼å®¹æ€§

æœ¬é¡¹ç›®å®Œå…¨å…¼å®¹Linux treeå‘½ä»¤çš„æ‰€æœ‰å‚æ•°ï¼Œåœ¨åŠŸèƒ½å’Œè¾“å‡ºæ ¼å¼ä¸Šä¿æŒä¸€è‡´ã€‚ä¸»è¦å·®å¼‚åŒ…æ‹¬ï¼š

1. äºŒè¿›åˆ¶å¤§å°æ›´å°ï¼ˆçº¦1.3MB vs Linux treeçš„çº¦4MBï¼‰
2. é»˜è®¤æ·±åº¦é™åˆ¶ä¸º3å±‚ï¼Œæé«˜æ€§èƒ½
3. å¢å¼ºçš„JSONè¾“å‡ºæ ¼å¼ï¼ˆæ— é‡å¤æ ¹èŠ‚ç‚¹ï¼‰
4. å¹¶è¡Œå¤„ç†æ”¯æŒï¼ˆRayonåŠ é€Ÿï¼‰
5. å®Œæ•´çš„æµ‹è¯•å¥—ä»¶

## æ€§èƒ½ä¼˜åŒ–

### äºŒè¿›åˆ¶å¤§å°ä¼˜åŒ–

é¡¹ç›®ä½¿ç”¨äº†å¤šç§ä¼˜åŒ–æŠ€æœ¯æ¥å‡å°äºŒè¿›åˆ¶å¤§å°ï¼š

- **é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLTOï¼‰**ï¼š`lto = true`
- **å•ä»£ç ç”Ÿæˆå•å…ƒ**ï¼š`codegen-units = 1`
- **Abort on panic**ï¼š`panic = "abort"`
- **Stripè°ƒè¯•ä¿¡æ¯**ï¼š`strip = true`
- **æ¡ä»¶ç¼–è¯‘**ï¼šä»…åœ¨éœ€è¦æ—¶åŒ…å«å½©è‰²è¾“å‡ºç­‰åŠŸèƒ½
- **ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–**ï¼šæ‰‹åŠ¨å®ç°äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œé¿å…å¼•å…¥å¤§å‹åº“

### æ€§èƒ½ä¼˜åŒ–

- **é»˜è®¤æ·±åº¦é™åˆ¶**ï¼šé»˜è®¤é™åˆ¶æ·±åº¦ä¸º3å±‚ï¼Œé¿å…åœ¨å¤§å‹ç›®å½•ä¸­éå†è¿‡æ·±
- **é«˜æ•ˆçš„ç›®å½•éå†**ï¼šä½¿ç”¨walkdiråº“è¿›è¡Œé«˜æ•ˆçš„ç›®å½•éå†
- **å¹¶è¡Œå¤„ç†æ”¯æŒ**ï¼šä½¿ç”¨Rayonè¿›è¡Œå¤šçº¿ç¨‹æ’åºï¼ŒåŠ é€Ÿå¤§ç›®å½•å¤„ç†
  - è‡ªåŠ¨æ£€æµ‹ï¼šå½“ä½¿ç”¨`--threads`æˆ–`--progress`å‚æ•°æ—¶å¯ç”¨
  - æ‰‹åŠ¨æ§åˆ¶ï¼šé€šè¿‡`--threads N`æŒ‡å®šçº¿ç¨‹æ•°

## æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œä½¿ç”¨`cargo test`è¿è¡Œï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_parallel_walk
cargo test test_json_output_structure
```

**æµ‹è¯•è¦†ç›–ï¼š**
- âœ… åŸºæœ¬éå†åŠŸèƒ½
- âœ… å¹¶è¡Œ vs ä¸²è¡Œä¸€è‡´æ€§
- âœ… æ’åºåŠŸèƒ½
- âœ… JSONè¾“å‡ºç»“æ„
- âœ… ç›®å½•è¿‡æ»¤
- âœ… æ’é™¤/åŒ…å«æ¨¡å¼
- âœ… æ—¶é—´æ’åº

## æ„å»ºé€‰é¡¹

### å¼€å‘æ„å»º

```bash
cargo build
```

### å‘å¸ƒæ„å»ºï¼ˆä¼˜åŒ–å¤§å°å’Œæ€§èƒ½ï¼‰

```bash
cargo build --release
```

### æ„å»ºä¸å¸¦å½©è‰²è¾“å‡ºçš„ç‰ˆæœ¬

```bash
cargo build --release --no-default-features
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œé›†æˆæµ‹è¯•
cargo test --test integration

# æ˜¾ç¤ºæµ‹è¯•è¾“å‡º
cargo test -- --nocapture
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡GitHub Issuesä¸æˆ‘è”ç³»ã€‚
### æ˜¾ç¤ºå¤„ç†è¿›åº¦

```bash
tree --progress
```

### ä½¿ç”¨å¹¶è¡Œå¤„ç†åŠ é€Ÿå¤§ç›®å½•

```bash
tree --threads 4
```

### æ— ç¼©è¿›çº¿æ¨¡å¼ï¼ˆä»…æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ï¼‰

```bash
tree -i
```

### æ˜¾ç¤ºæ–‡ä»¶ç±»å‹æ ‡è®°

```bash
tree -F
# è¾“å‡ºç¤ºä¾‹ï¼š
# â”œâ”€â”€ src/
# â”œâ”€â”€ tree.exe*
# â”œâ”€â”€ README.md
# â””â”€â”€ link@  (å¦‚æœæ˜¯ç¬¦å·é“¾æ¥)
```

### ç»„åˆä½¿ç”¨å¤šä¸ªå‚æ•°

```bash
tree -a -F -s -p --progress
# æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ã€ç±»å‹æ ‡è®°ã€å¤§å°ã€æƒé™ï¼Œå¹¶æ˜¾ç¤ºè¿›åº¦
```
